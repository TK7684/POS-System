# POS & Inventory System - Firebase Version

A comprehensive Point of Sale (POS) and inventory management system with real-time Firebase integration, Google Sheets synchronization, and Line Bot automation capabilities.

## üöÄ Features

### Core POS Functionality
- ‚úÖ **Google Sign-In Authentication** - Secure Firebase authentication with Google
- ‚úÖ **Email/Password Login** - Traditional authentication method
- ‚úÖ **Real-time Inventory Tracking** - Live stock monitoring
- ‚úÖ **Sales & Purchase Recording** - Complete transaction management
- ‚úÖ **Multi-platform Support** - ‡∏£‡πâ‡∏≤‡∏ô, Grab, FoodPanda, Line Man
- ‚úÖ **Comprehensive Menu System** - Complete Thai menu with 32+ items
- ‚úÖ **Ingredient Management** - Detailed recipe and stock tracking
- ‚úÖ **Low Stock Alerts** - Automated notifications for reorder

### Advanced Integrations
- üìä **Google Sheets Integration** - Automatic data synchronization
- üí¨ **Line Bot Integration** - Automated purchase processing from Line
- üîç **Slip Image Processing** - OCR for payment slip analysis
- üì± **Mobile Responsive** - PWA-ready for tablets and phones
- üåê **Offline Support** - Works without internet connection
- üìà **Real-time Analytics** - Live dashboard with metrics
- üîß **Debug Panel** - Comprehensive logging and troubleshooting

### Menu Items Included
The system includes your complete Thai menu:

#### ‡∏Å‡∏∏‡πâ‡∏á‡πÅ‡∏ä‡πà‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤
- A1: ‡∏Å‡∏∏‡πâ‡∏á‡πÅ‡∏ä‡πà‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤‡πÅ‡∏ã‡πà‡∏ö‡∏ã‡∏µ‡πä‡∏î 7 ‡∏ï‡∏±‡∏ß (‡∏ø139)
- A2: ‡∏Å‡∏∏‡πâ‡∏á‡πÅ‡∏ä‡πà‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤‡πÅ‡∏ã‡πà‡∏ö‡∏ã‡∏µ‡πä‡∏î 12 ‡∏ï‡∏±‡∏ß (‡∏ø179)
- D: ‡∏Å‡∏∏‡πâ‡∏á‡πÅ‡∏ä‡πà‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤‡πÅ‡∏ã‡πà‡∏ö‡∏ã‡∏µ‡πä‡∏î 70 ‡∏ï‡∏±‡∏ß (‡∏ø1179)

#### ‡∏Å‡∏∏‡πâ‡∏á‡∏î‡∏≠‡∏á‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß
- B1: ‡∏Å‡∏∏‡πâ‡∏á‡∏î‡∏≠‡∏á‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ 7 ‡∏ï‡∏±‡∏ß (‡∏ø139)
- B2: ‡∏Å‡∏∏‡πâ‡∏á‡∏î‡∏≠‡∏á‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ 12 ‡∏ï‡∏±‡∏ß (‡∏ø192)

#### ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏°‡∏ô‡∏π
- SetB1: ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏∏‡πâ‡∏á‡∏î‡∏≠‡∏á‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß 7 ‡∏ï‡∏±‡∏ß (‡∏ø149)
- SetB2: ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏∏‡πâ‡∏á‡∏î‡∏≠‡∏á‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß 12 ‡∏ï‡∏±‡∏ß (‡∏ø215)
- SetB3: ‡πÄ‡∏ã‡πá‡∏ï‡πÅ‡∏ã‡πà‡∏ö‡∏Ñ‡∏∏‡πâ‡∏° 7 ‡∏ï‡∏±‡∏ß + ‡∏Ç‡πâ‡∏≤‡∏ß‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô + ‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢ (‡∏ø169)
- SetB4: ‡πÄ‡∏ã‡πá‡∏ï‡πÅ‡∏ã‡πà‡∏ö‡∏Ñ‡∏∏‡πâ‡∏° 12 ‡∏ï‡∏±‡∏ß + ‡∏Ç‡πâ‡∏≤‡∏ß‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô + ‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢ (‡∏ø219)

#### ‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô
- C1: ‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡∏î‡∏≠‡∏á‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏•‡πá‡∏Å (‡∏ø256)
- C2: ‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡∏î‡∏≠‡∏á‡∏ã‡∏µ‡∏≠‡∏¥‡πã‡∏ß‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ ‡πÄ‡∏ã‡πá‡∏ï‡πÉ‡∏´‡∏ç‡πà (‡∏ø299)

#### ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡πÄ‡∏°‡∏ô‡∏π
- B1C1: ‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô + ‡∏Å‡∏∏‡πâ‡∏á ‡∏î‡∏≠‡∏á‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ (‡∏ø239)
- SetB1C1: ‡πÄ‡∏ã‡πá‡∏ï‡πÅ‡∏ã‡πà‡∏ö‡∏Ñ‡∏∏‡πâ‡∏° ‡πÅ‡∏ã‡∏•‡∏°‡πà‡∏≠‡∏ô+‡∏Å‡∏∏‡πâ‡∏á‡∏î‡∏≠‡∏á‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß + ‡∏Ç‡πâ‡∏≤‡∏ß‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô + ‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢ (‡∏ø279)

#### ‡∏Å‡∏∏‡πâ‡∏á‡∏•‡∏∏‡∏¢‡∏™‡∏ß‡∏ô/‡∏•‡∏≤‡∏ö
- E1: ‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î ‡∏•‡∏∏‡∏¢‡∏™‡∏ß‡∏ô 7 ‡∏ï‡∏±‡∏ß (‡∏ø139)
- E2: ‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏∏‡∏Å ‡∏•‡∏∏‡∏¢‡∏™‡∏ß‡∏ô 7 ‡∏ï‡∏±‡∏ß (‡∏ø149)
- F1: ‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î ‡∏•‡∏≤‡∏ö 7 ‡∏ï‡∏±‡∏ß (‡∏ø139)
- F2: ‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏∏‡∏Å ‡∏•‡∏≤‡∏ö 7 ‡∏ï‡∏±‡∏ß (‡∏ø149)

#### ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏™‡∏£‡∏¥‡∏°
- G: ‡∏õ‡∏π‡∏≠‡∏±‡∏î‡∏™‡∏î‡πÄ‡∏î‡πâ‡∏á + ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏ã‡∏µ‡∏ü‡∏π‡πâ‡∏î‡∏à‡∏µ‡πä‡∏î‡∏à‡πä‡∏≤‡∏î 8 ‡∏ä‡∏¥‡πâ‡∏ô (‡∏ø79)
- S: ‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢‡∏≠‡∏ö‡∏Å‡∏£‡∏≠‡∏ö (‡∏ø25)
- L: ‡∏´‡∏≠‡∏°‡πÄ‡∏à‡∏µ‡∏¢‡∏ß (‡∏ø20)
- M: ‡∏°‡∏∞‡∏£‡∏∞‡∏´‡∏±‡πà‡∏ô‡πÅ‡∏ß‡πà‡∏ô (‡∏ø15)
- N: ‡∏Å‡∏∞‡∏´‡∏•‡πà‡∏≥‡∏õ‡∏•‡∏µ‡∏ã‡∏≠‡∏¢ (‡∏ø15)
- O: ‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏ã‡∏µ‡∏ü‡∏π‡πâ‡∏î (‡∏ø25)
- P: ‡πÇ‡∏Ñ‡πâ‡∏Å ‡∏Ç‡∏ô‡∏≤‡∏î 325 ‡∏°‡∏•. (‡∏ø30)
- Q: ‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏° ‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡∏±‡∏• ‡∏Ç‡∏ô‡∏≤‡∏î 600 ‡∏°‡∏•. (‡∏ø25)
- R: ‡πÄ‡∏õ‡πä‡∏õ‡∏ã‡∏µ‡πà ‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á 325 ‡∏°‡∏• (‡∏ø30)

## üõ†Ô∏è Installation & Setup

### Prerequisites
- Node.js 16+ (for development)
- Firebase account with project created
- Google Cloud Platform account
- Line Developers account (for Line Bot)

### 1. Firebase Setup

1. **Create Firebase Project**
   ```bash
   # Install Firebase CLI
   npm install -g firebase-tools
   
   # Login to Firebase
   firebase login
   
   # Initialize project
   firebase init
   ```

2. **Configure Firebase Authentication**
   - Go to Firebase Console ‚Üí Authentication ‚Üí Sign-in method
   - Enable **Google** provider
   - Add your domain to authorized domains
   - Enable **Email/Password** provider

3. **Setup Firestore Database**
   ```bash
   # Deploy security rules
   firebase deploy --only firestore:rules
   
   # Deploy indexes
   firebase deploy --only firestore:indexes
   ```

4. **Configure Firebase Hosting**
   ```bash
   firebase deploy --only hosting
   ```

### 2. Google Sheets Setup

1. **Enable Google Sheets API**
   - Go to Google Cloud Console ‚Üí APIs & Services ‚Üí Library
   - Search and enable "Google Sheets API"
   - Create credentials (API Key + OAuth 2.0 Client ID)

2. **Create Google Sheet**
   - Create new spreadsheet with the following tabs:
     - `Sales` - Columns: Date, Menu, Platform, Quantity, Price, Total, User, Status
     - `Purchases` - Columns: Date, Vendor, Amount, Items, Type, Reference
     - `Inventory` - Columns: Name, Category, Current Stock, Min Stock, Unit, Last Updated
     - `Ingredients` - Columns: Name, Category, Unit, Min Stock, Current Stock
     - `Recipes` - Columns: Menu ID, Ingredient, Quantity, Unit
     - `Expenses` - Columns: Date, Category, Description, Amount, Type
     - `Reports` - Columns: Date, Type, Total, Items Count, Notes

3. **Update Configuration**
   ```javascript
   // In config/integrations.js
   const GOOGLE_SHEETS_CONFIG = {
     API_KEY: "YOUR_API_KEY_HERE",
     CLIENT_ID: "YOUR_CLIENT_ID_HERE",
     SPREADSHEET_ID: "YOUR_SPREADSHEET_ID_HERE"
   };
   ```

### 3. Line Bot Setup

1. **Create Line Bot**
   - Go to Line Developers Console
   - Create new Channel (Messaging API)
   - Get Channel Access Token and Channel Secret

2. **Configure Webhook**
   ```bash
   # Deploy Firebase Functions for webhook
   firebase deploy --only functions
   ```

3. **Update Configuration**
   ```javascript
   // In config/integrations.js
   const LINE_BOT_CONFIG = {
     CHANNEL_ACCESS_TOKEN: "YOUR_LINE_CHANNEL_ACCESS_TOKEN",
     WEBHOOK_URL: "YOUR_WEBHOOK_URL",
     GROUP_IDS: ["YOUR_LINE_GROUP_ID"]
   };
   ```

### 4. Local Development

1. **Clone Repository**
   ```bash
   git clone <repository-url>
   cd firebase-version
   ```

2. **Install Dependencies**
   ```bash
   npm install
   ```

3. **Start Development Server**
   ```bash
   # Serve locally
   firebase serve --only hosting
   
   # Or use live server
   npx live-server --port=3000
   ```

## üöÄ Quick Start

### 1. Basic Setup
1. Open `index.html` in your browser
2. Click "üå± Seed Data" to populate with your menu items
3. Sign in with Google account
4. Start using the POS system

### 2. Connect Integrations
1. Click "üìä Connect Sheets" to connect Google Sheets
2. Click "üí¨ Line Bot" to initialize Line integration
3. Test by sending a slip image or purchase text to your Line group

### 3. Debug Mode
- Press `Ctrl+Shift+D` to open debug panel
- Press `Ctrl+L` to export logs
- Check Firebase status indicator (top-right corner)

## üì± Usage Guide

### Basic Operations

#### Recording Sales
1. Click "üõí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢"
2. Select platform (‡∏£‡πâ‡∏≤‡∏ô, Grab, FoodPanda, Line Man)
3. Choose menu from dropdown
4. Enter quantity and price (auto-filled)
5. Click "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢"

#### Recording Purchases
1. Click "üì¶ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠"
2. Select ingredient from dropdown
3. Enter quantity purchased
4. Enter total cost
5. Enter unit (‡∏Å‡∏Å., ‡∏•‡∏¥‡∏ï‡∏£, etc.)
6. Click "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠"

#### Monitoring Stock
- Real-time low stock alerts appear automatically
- Check "üö® ‡∏™‡∏ï‡πä‡∏≠‡∏Å‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î" section
- Stock updates automatically after sales/purchases

### Line Bot Operations

#### Processing Payment Slips
1. Send payment slip image to Line group
2. Bot will:
   - Extract amount using OCR
   - Identify vendor from slip
   - Save to Google Sheets
   - Update Firebase inventory
   - Send confirmation message

#### Text Purchase Orders
1. Send text like: "‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏∏‡πâ‡∏á 5 ‡∏ï‡∏±‡∏ß ‡∏à‡∏≤‡∏Å‡∏ï‡∏•‡∏≤‡∏î ‡∏£‡∏≤‡∏Ñ‡∏≤ 500 ‡∏ö‡∏≤‡∏ó"
2. Bot will:
   - Parse purchase details
   - Save to Google Sheets
   - Update Firebase inventory
   - Send confirmation

### Google Sheets Integration

#### Automatic Synchronization
- All sales automatically sync to `Sales` sheet
- All purchases sync to `Purchases` sheet
- Inventory updates reflect in `Inventory` sheet
- Real-time updates when connected

#### Manual Operations
- Click "üìä Connect Sheets" to authenticate
- View real-time data in Google Sheets
- Export reports from Sheets as needed

## üîß Configuration

### Environment Variables
Create `.env` file for local development:
```env
# Firebase
FIREBASE_API_KEY=your_firebase_api_key
FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
FIREBASE_PROJECT_ID=your_project_id
FIREBASE_STORAGE_BUCKET=your_project.appspot.com
FIREBASE_MESSAGING_SENDER_ID=your_sender_id
FIREBASE_APP_ID=your_app_id

# Google Sheets
GOOGLE_SHEETS_API_KEY=your_google_api_key
GOOGLE_SHEETS_CLIENT_ID=your_client_id
GOOGLE_SHEETS_SPREADSHEET_ID=your_sheet_id

# Line Bot
LINE_CHANNEL_ACCESS_TOKEN=your_line_token
LINE_CHANNEL_SECRET=your_line_secret
LINE_WEBHOOK_URL=your_webhook_url
LINE_GROUP_ID=your_group_id

# Firebase Functions
FUNCTIONS_BASE_URL=https://your-region-your-project.cloudfunctions.net
```

### Custom Settings
Edit `config/integrations.js` for:
- Menu items and pricing
- Ingredient list and units
- Validation rules
- Feature flags
- UI preferences

## üêõ Troubleshooting

### Common Issues

#### Firebase Connection Problems
**Error**: "Missing or insufficient permissions"
**Solution**: 
1. Deploy Firestore rules: `firebase deploy --only firestore:rules`
2. Check user authentication status
3. Verify collection names match security rules

#### Google Sheets Integration Issues
**Error**: "API key invalid" or "Unauthorized"
**Solution**:
1. Verify API key in Google Cloud Console
2. Check OAuth 2.0 consent screen configuration
3. Ensure spreadsheet is shared with service account

#### Line Bot Not Responding
**Error**: Webhook timeout or 500 error
**Solution**:
1. Check webhook URL configuration
2. Verify channel access token
3. Check Firebase Functions logs

#### Data Not Syncing
**Error**: Changes not appearing in real-time
**Solution**:
1. Check internet connection
2. Verify Firebase rules allow reads/writes
3. Check browser console for JavaScript errors

### Debug Tools

#### Debug Panel (`Ctrl+Shift+D`)
- View app state and configuration
- Check user authentication status
- Monitor recent logs
- Export logs for analysis

#### Log Export (`Ctrl+L`)
- Download complete log history
- Share logs for support
- Analyze performance issues

#### Firebase Status Indicator
- üü¢ Green: Connected and working
- üî¥ Red: Connection issues
- üü° Yellow: Demo mode

## üìä Performance Monitoring

### Logging System
The app includes comprehensive logging:
- **AUTH**: Authentication events
- **DB**: Database operations
- **UI**: User interactions
- **PERF**: Performance metrics
- **LINE**: Line Bot activities
- **SHEETS**: Google Sheets operations

### Performance Metrics
- API response times
- Database operation duration
- User interaction latency
- Memory usage tracking

## üîí Security

### Firebase Security Rules
- Only authenticated users can access data
- Users can only modify their own records
- Input validation on all write operations
- Rate limiting implemented

### Data Protection
- All communications use HTTPS
- Sensitive tokens stored securely
- Input sanitization prevents XSS
- Firebase security rules enforce data access

## üìà Analytics & Reporting

### Built-in Reports
- Daily/Weekly/Monthly sales summary
- Top selling menu items
- Low stock alerts
- Purchase history analysis
- Profit margin calculations

### Google Sheets Reports
- Pivot tables for advanced analysis
- Charts and visualizations
- Export to PDF/Excel
- Custom report generation

## üîÑ Updates & Maintenance

### Version Updates
1. Backup current data from Google Sheets
2. Update application files
3. Deploy to Firebase Hosting
4. Test all integrations
5. Restore data if needed

### Database Maintenance
- Regular cleanup of old logs
- Archive old transactions
- Optimize Firestore indexes
- Monitor storage usage

## üìû Support

### Getting Help
1. Check debug panel (`Ctrl+Shift+D`)
2. Export logs (`Ctrl+L`)
3. Review this documentation
4. Check Firebase Functions logs
5. Contact support with logs

### Contributing
1. Fork repository
2. Create feature branch
3. Make changes with logging
4. Test thoroughly
5. Submit pull request

## üìÑ License

This project is licensed under the MIT License - see the LICENSE file for details.

## üôè Acknowledgments

- Firebase for real-time database
- Google Sheets API for data synchronization
- Line Messaging API for bot integration
- Tailwind CSS for styling
- Firebase Auth for authentication

---

**Version**: 2.0.0  
**Last Updated**: 2024  
**Compatibility**: Modern browsers with JavaScript ES6+ support